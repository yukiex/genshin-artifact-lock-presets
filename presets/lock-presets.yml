version: 1
notes:
  - Substats are evaluated as "include any N of".
  - Main stats cannot be mandatory in UI; `main_allowed` is only a suggestion.
  - Slots: flower, plume, sands, goblet, circlet.
  - Abbrev: CR=Crit Rate, CD=Crit DMG, ER=Energy Recharge, EM=Elemental Mastery.

sets:
  - id: tsukuyo
    name_ja: 月を紡ぐ夜の歌
    nickname_en: Moonweaver (support-oriented: ER/EM; off-field works)
    presets:
      - key: recommended
        name: Recommended (official-like baseline)
        targets: [Xingqiu, Yelan, Xiangling, Fischl, Beidou, YaeMiko,
                  Kokomi, Baizhu, Bennett, Diona, Layla, Kirara,
                  Barbara, Thoma, Qiqi, KukiShinobu, Collei, Kaveh]
        slots:
          flower:
            main_allowed: [Any]
            substats_required_any_of: [ER, EM, CR, CD]
            substats_required_min: 2
          plume:
            main_allowed: [Any]
            substats_required_any_of: [ER, EM, CR, CD]
            substats_required_min: 2
          sands:
            main_allowed: [ER%, EM]
            substats_required_any_of: [ER, EM, CR, CD]
            substats_required_min: 2
          goblet:
            main_allowed: [ElementalDMG%, EM]   # avoid HP%/DEF% here
            substats_required_any_of: [CR, CD, ER, EM]
            substats_required_min: 2
          circlet:
            main_allowed: [CR, CD, Healing%, EM]
            substats_required_any_of: [ER, EM, CR]
            substats_required_min: 2

      - key: setting1
        name: Support-keep (lenient)
        targets: [Xingqiu, Yelan, Xiangling, Fischl, Beidou, YaeMiko,
                  Kokomi, Baizhu, Bennett, Diona, Layla, Kirara,
                  Barbara, Thoma, Qiqi, KukiShinobu, Collei, Kaveh]
        slots:
          flower:  { main_allowed: [Any], substats_required_any_of: [ER, EM, CR, CD], substats_required_min: 2 }
          plume:   { main_allowed: [Any], substats_required_any_of: [ER, EM, CR, CD], substats_required_min: 2 }
          sands:   { main_allowed: [ER%, EM], substats_required_any_of: [ER, EM, CR, CD], substats_required_min: 2 }
          goblet:  { main_allowed: [ElementalDMG%, EM], substats_required_any_of: [CR, CD, ER, EM], substats_required_min: 2 }
          circlet: { main_allowed: [CR, CD, Healing%, EM], substats_required_any_of: [ER, EM, CR], substats_required_min: 2 }

      - key: setting2
        name: Support/Sub-DPS (strict)
        targets: [Xingqiu, Yelan, Xiangling, Fischl, YaeMiko,
                  Kokomi, Baizhu, KukiShinobu, Nahida, Collei]
        slots:
          flower:  { main_allowed: [Any], substats_required_any_of: [ER, EM, CR, CD], substats_required_min: 3 }
          plume:   { main_allowed: [Any], substats_required_any_of: [ER, EM, CR, CD], substats_required_min: 3 }
          sands:   { main_allowed: [ER%, EM], substats_required_any_of: [ER, EM, CR, CD], substats_required_min: 3 }
          goblet:  { main_allowed: [ElementalDMG%], substats_required_any_of: [CR, CD, EM], substats_required_min: 2 }
          circlet: { main_allowed: [CR, CD, Healing%, EM], substats_required_any_of: [ER, EM, CR, CD], substats_required_min: 3 }

  - id: tenkyu
    name_ja: 天穹の顕現せし夜
    nickname_en: Night of the Sky (on-field DPS: Crit-focused; +CR while on-field)
    presets:
      - key: recommended
        name: Recommended (balanced DPS baseline)
        targets: [Cyno, Keqing, Clorinde, Alhaitham, Tighnari,
                  HuTao, Yoimiya, Ganyu, Tartaglia, Neuvillette, Eula]
        slots:
          flower:
            main_allowed: [Any]
            substats_required_any_of: [CR, CD]
            substats_required_min: 1
          plume:
            main_allowed: [Any]
            substats_required_any_of: [CR, CD]
            substats_required_min: 1
          sands:
            main_allowed: [ATK%, EM, HP%]   # std/reaction/HP scalers
            substats_required_any_of: [CR, CD, ER]
            substats_required_min: 1
          goblet:
            main_allowed: [ElementalDMG%]   # lock only elemental goblets
            substats_required_any_of: [CR, CD]
            substats_required_min: 1
          circlet:
            main_allowed: [CR, CD]
            substats_required_any_of: [CR, CD]
            substats_required_min: 1

      - key: setting1
        name: On-field DPS (lenient)
        targets: [Cyno, Keqing, Clorinde, Alhaitham, Tighnari,
                  HuTao, Yoimiya, Ganyu, Tartaglia, Neuvillette, Eula]
        slots:
          flower:  { main_allowed: [Any], substats_required_any_of: [CR, CD], substats_required_min: 1 }
          plume:   { main_allowed: [Any], substats_required_any_of: [CR, CD], substats_required_min: 1 }
          sands:   { main_allowed: [ATK%, EM, HP%], substats_required_any_of: [CR, CD, ER], substats_required_min: 1 }
          goblet:  { main_allowed: [ElementalDMG%], substats_required_any_of: [CR, CD], substats_required_min: 1 }
          circlet: { main_allowed: [CR, CD], substats_required_any_of: [CR, CD], substats_required_min: 1 }

      - key: setting2
        name: On-field DPS (strict)
        targets: [Cyno, Keqing, Clorinde, Alhaitham, Tighnari, Yoimiya, HuTao, Ganyu, Neuvillette]
        slots:
          flower:  { main_allowed: [Any], substats_required_any_of: [CR, CD, EM], substats_required_min: 2 }
          plume:   { main_allowed: [Any], substats_required_any_of: [CR, CD, EM], substats_required_min: 2 }
          sands:   { main_allowed: [ATK%, EM, HP%], substats_required_any_of: [CR, CD, EM, ER], substats_required_min: 2 }
          goblet:  { main_allowed: [ElementalDMG%], substats_required_any_of: [CR, CD, EM], substats_required_min: 2 }
          circlet: { main_allowed: [CR, CD], substats_required_any_of: [CR, CD], substats_required_min: 2 }
