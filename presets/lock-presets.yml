version: 1
notes:
  - Substats are evaluated as "include any N of".
  - Main stats cannot be mandatory in UI; `main_allowed` is only a suggestion.
  - Slots: flower, plume, sands, goblet, circlet.
  - Abbrev: CR=Crit Rate, CD=Crit DMG, ER=Energy Recharge, EM=Elemental Mastery.

sets:
  - id: tsukuyo
    name_ja: 月を紡ぐ夜の歌
    nickname_en: "Moonweaver (support-oriented: ER/EM; off-field works)"
    presets:
      - key: recommended
        name: Recommended (official-like baseline)
        targets: [Xingqiu, Yelan, Xiangling, Fischl, Beidou, YaeMiko,
                  Kokomi, Baizhu, Bennett, Diona, Layla, Kirara,
                  Barbara, Thoma, Qiqi, KukiShinobu, Collei, Kaveh]
        slots:
          flower:
            main_allowed: [HP]
            substats_required_any_of: [ATK%, CR, CD, ER, EM]
            substats_required_min: 2
            substats_required_all_of: [ER, EM]
          plume:
            main_allowed: [ATK]
            substats_required_any_of: [ATK%, CR, CD, ER, EM]
            substats_required_min: 2
            substats_required_all_of: [ER, EM]
          sands:
            main_allowed: [EM, ATK%, ER%]
            substats_required_any_of: [ATK%, CR, CD, ER, EM]
            substats_required_min: 2
            substats_required_all_of: [ER, EM]
          goblet:
            main_allowed: [HydroDMG%, DendroDMG%, EM, ATK%]
            substats_required_any_of: [ATK%, CR, CD, ER, EM]
            substats_required_min: 2
            substats_required_all_of: [ER, EM]
          circlet:
            main_allowed: [EM, CR, CD]
            substats_required_any_of: [ATK%, CR, CD, ER, EM]
            substats_required_min: 2
            substats_required_all_of: [ER, EM]

      - key: setting1
        name: Moonlight Battery (Electro/Hydro support)
        targets: [RaidenShogun, Inefa, Aino, Xingqiu, Yelan]
        slots:
          flower:
            main_allowed: [HP]
            substats_required_any_of: [ER, EM, HP%, ATK%, CR, CD]
            substats_required_min: 3
            substats_required_all_of: [ER]
          plume:
            main_allowed: [ATK]
            substats_required_any_of: [ER, EM, HP%, ATK%, CR, CD]
            substats_required_min: 3
            substats_required_all_of: [ER]
          sands:
            main_allowed: [ER%, EM]
            substats_required_any_of: [ER, EM, HP%, ATK%, CR, CD]
            substats_required_min: 3
            substats_required_all_of: [ER]
          goblet:
            main_allowed: [ElectroDMG%, HydroDMG%, ElementalDMG%, EM]
            substats_required_any_of: [ER, EM, HP%, ATK%, CR, CD]
            substats_required_min: 3
            substats_required_all_of: [ER]
          circlet:
            main_allowed: [EM, Healing%, CR]
            substats_required_any_of: [ER, EM, HP%, ATK%, CR, CD]
            substats_required_min: 3
            substats_required_all_of: [ER]

      - key: setting2
        name: Bloom Architect (Dendro reaction)
        targets: [Rauma, Kaveh, TravelerDendro, Nahida, Collei]
        slots:
          flower:
            main_allowed: [HP]
            substats_required_any_of: [EM, ER, ATK%, CR, CD]
            substats_required_min: 3
            substats_required_all_of: [EM]
          plume:
            main_allowed: [ATK]
            substats_required_any_of: [EM, ER, ATK%, CR, CD]
            substats_required_min: 3
            substats_required_all_of: [EM]
          sands:
            main_allowed: [EM, ATK%]
            substats_required_any_of: [EM, ER, ATK%, CR, CD]
            substats_required_min: 3
            substats_required_all_of: [EM]
          goblet:
            main_allowed: [DendroDMG%, ElementalDMG%, EM]
            substats_required_any_of: [EM, ER, ATK%, CR, CD]
            substats_required_min: 3
            substats_required_all_of: [EM]
          circlet:
            main_allowed: [EM, CR, CD]
            substats_required_any_of: [EM, ER, ATK%, CR, CD]
            substats_required_min: 3
            substats_required_all_of: [EM]

  - id: tenkyu
    name_ja: 天穹の顕現せし夜
    nickname_en: >
      Night of the Sky (on-field DPS: Crit-focused; +CR while on-field)
    presets:
      - key: recommended
        name: Recommended (balanced DPS baseline)
        targets: [Cyno, Keqing, Clorinde, Alhaitham, Tighnari,
                  HuTao, Yoimiya, Ganyu, Tartaglia, Neuvillette, Eula]
        slots:
          flower:
            main_allowed: [HP]
            substats_required_any_of: [CR, CD, ER, EM]
            substats_required_min: 2
            substats_required_all_of: [CR, CD]
          plume:
            main_allowed: [ATK]
            substats_required_any_of: [CR, CD, ER, EM]
            substats_required_min: 2
            substats_required_all_of: [CR, CD]
          sands:
            main_allowed: [EM, ATK%]
            substats_required_any_of: [CR, CD, ER, EM]
            substats_required_min: 2
            substats_required_all_of: [CR, CD]
          goblet:
            main_allowed: [ElementalDMG%]
            substats_required_any_of: [CR, CD, ER, EM]
            substats_required_min: 2
            substats_required_all_of: [CR, CD]
          circlet:
            main_allowed: [CR, CD]
            substats_required_any_of: [CR, CD, ER, EM]
            substats_required_min: 2
            substats_required_all_of: [CR, CD]

      - key: setting1
        name: Quickbloom Driver (Electro)
        targets: [Cyno, Clorinde, YaeMiko, Keqing]
        slots:
          flower:
            main_allowed: [HP]
            substats_required_any_of: [CR, CD, EM, ATK%, ER]
            substats_required_min: 3
          plume:
            main_allowed: [ATK]
            substats_required_any_of: [CR, CD, EM, ATK%, ER]
            substats_required_min: 3
          sands:
            main_allowed: [EM, ATK%, ER%]
            substats_required_any_of: [CR, CD, EM, ATK%, ER]
            substats_required_min: 3
          goblet:
            main_allowed: [ElectroDMG%, ElementalDMG%, EM]
            substats_required_any_of: [CR, CD, EM, ATK%, ER]
            substats_required_min: 3
          circlet:
            main_allowed: [CR, CD]
            substats_required_any_of: [CR, CD, EM, ATK%]
            substats_required_min: 3
  - id: shinro
    name_ja: 深廊の終曲
    nickname_en: Finale of the Deep (Cryo DMG; energy drain gimmick)
    presets:
      - key: recommended
        name: Recommended (official-like baseline)
        targets: [Skirk, Marvica, Kaeya, Aloy]
        slots:
          flower:
            main_allowed: [HP]
            substats_required_any_of: [ATK%, CR, CD]
            substats_required_min: 2
            substats_required_all_of: [CR, CD]
          plume:
            main_allowed: [ATK]
            substats_required_any_of: [ATK%, CR, CD]
            substats_required_min: 2
            substats_required_all_of: [CR, CD]
          sands:
            main_allowed: [ATK%]
            substats_required_any_of: [CR, CD]
            substats_required_min: 2
            substats_required_all_of: [CR, CD]
          goblet:
            main_allowed: [CryoDMG%, ATK%]
            substats_required_any_of: [ATK%, CR, CD]
            substats_required_min: 2
            substats_required_all_of: [CR, CD]
          circlet:
            main_allowed: [CR, CD]
            substats_required_any_of: [ATK%, CR, CD]
            substats_required_min: 2
            substats_required_all_of: [CR, CD]

      - key: setting1
        name: Zero-Energy Cryo Driver
        targets: [Skirk, Marvica]
        slots:
          flower:
            main_allowed: [HP]
            substats_required_any_of: [ATK%, CR, CD]
            substats_required_min: 3
            substats_required_all_of: [CR, CD]
          plume:
            main_allowed: [ATK]
            substats_required_any_of: [ATK%, CR, CD]
            substats_required_min: 3
            substats_required_all_of: [CR, CD]
          sands:
            main_allowed: [ATK%, ER%]
            substats_required_any_of: [ATK%, CR, CD, ER]
            substats_required_min: 3
            substats_required_all_of: [CR, CD]
          goblet:
            main_allowed: [CryoDMG%, ATK%]
            substats_required_any_of: [ATK%, CR, CD, ER]
            substats_required_min: 3
            substats_required_all_of: [CR, CD]
          circlet:
            main_allowed: [CR, CD]
            substats_required_any_of: [ATK%, CR, CD, ER]
            substats_required_min: 3
            substats_required_all_of: [CR, CD]

      - key: setting2
        name: Cryo 2pc Hybrid (general DPS)
        targets: [KamisatoAyaka, Ganyu, Rosaria, Shenhe]
        slots:
          flower:
            main_allowed: [HP]
            substats_required_any_of: [ATK%, ER, CR, CD]
            substats_required_min: 2
          plume:
            main_allowed: [ATK]
            substats_required_any_of: [ATK%, ER, CR, CD]
            substats_required_min: 2
          sands:
            main_allowed: [ATK%, ER%]
            substats_required_any_of: [ATK%, ER, CR, CD]
            substats_required_min: 2
          goblet:
            main_allowed: [CryoDMG%, ATK%]
            substats_required_any_of: [ATK%, ER, CR, CD]
            substats_required_min: 2
          circlet:
            main_allowed: [CR, CD]
            substats_required_any_of: [ATK%, ER, CR, CD]
            substats_required_min: 2

  - id: naganoya
    name_ja: 長き夜の誓い
    nickname_en: Song of Days Past (plunge stacks)
    presets:
      - key: recommended
        name: Recommended (official-like baseline)
        targets: [Xiao, Jiaoming, Varessa]
        slots:
          flower:
            main_allowed: [HP]
            substats_required_any_of: [ATK%, CR, CD]
            substats_required_min: 2
            substats_required_all_of: [CR, CD]
          plume:
            main_allowed: [ATK]
            substats_required_any_of: [ATK%, CR, CD]
            substats_required_min: 2
            substats_required_all_of: [CR, CD]
          sands:
            main_allowed: [ATK%]
            substats_required_any_of: [CR, CD]
            substats_required_min: 2
            substats_required_all_of: [CR, CD]
          goblet:
            main_allowed: [PyroDMG%, ElectroDMG%, AnemoDMG%, ATK%]
            substats_required_any_of: [ATK%, CR, CD]
            substats_required_min: 2
            substats_required_all_of: [CR, CD]
          circlet:
            main_allowed: [CR, CD]
            substats_required_any_of: [ATK%, CR, CD]
            substats_required_min: 2
            substats_required_all_of: [CR, CD]

      - key: setting1
        name: Plunge DPS Core
        targets: [Xiao, Jiaoming, Varessa]
        slots:
          flower:
            main_allowed: [HP]
            substats_required_any_of: [ATK%, CR, CD, ER]
            substats_required_min: 3
            substats_required_all_of: [CR, CD]
          plume:
            main_allowed: [ATK]
            substats_required_any_of: [ATK%, CR, CD, ER]
            substats_required_min: 3
            substats_required_all_of: [CR, CD]
          sands:
            main_allowed: [ATK%, ER%]
            substats_required_any_of: [ATK%, CR, CD, ER]
            substats_required_min: 3
            substats_required_all_of: [CR, CD]
          goblet:
            main_allowed: [AnemoDMG%, PyroDMG%, ElectroDMG%, GeoDMG%, ATK%]
            substats_required_any_of: [ATK%, CR, CD, ER]
            substats_required_min: 3
            substats_required_all_of: [CR, CD]
          circlet:
            main_allowed: [CR, CD]
            substats_required_any_of: [ATK%, CR, CD, ER]
            substats_required_min: 3
            substats_required_all_of: [CR, CD]

      - key: setting2
        name: Cloud-Retainer Enabled Plungers
        targets: [Furina, Navia, Freminet, Noelle]
        slots:
          flower:
            main_allowed: [HP]
            substats_required_any_of: [ATK%, CR, CD, ER]
            substats_required_min: 2
            substats_required_all_of: [CR]
          plume:
            main_allowed: [ATK]
            substats_required_any_of: [ATK%, CR, CD, ER]
            substats_required_min: 2
            substats_required_all_of: [CR]
          sands:
            main_allowed: [ATK%, ER%]
            substats_required_any_of: [ATK%, CR, CD, ER]
            substats_required_min: 2
            substats_required_all_of: [CR]
          goblet:
            main_allowed: [ElementalDMG%, ATK%]
            substats_required_any_of: [ATK%, CR, CD, ER]
            substats_required_min: 2
            substats_required_all_of: [CR]
          circlet:
            main_allowed: [CR, CD]
            substats_required_any_of: [ATK%, CR, CD, ER]
            substats_required_min: 2
            substats_required_all_of: [CR]

      - key: setting2
        name: Spread Driver (Dendro)
        targets: [Alhaitham, Tighnari, Nefer, Collei]
        slots:
          flower:
            main_allowed: [HP]
            substats_required_any_of: [CR, CD, EM, ATK%]
            substats_required_min: 3
          plume:
            main_allowed: [ATK]
            substats_required_any_of: [CR, CD, EM, ATK%]
            substats_required_min: 3
          sands:
            main_allowed: [EM, ATK%]
            substats_required_any_of: [CR, CD, EM, ATK%]
            substats_required_min: 3
          goblet:
            main_allowed: [DendroDMG%, ElementalDMG%, EM]
            substats_required_any_of: [CR, CD, EM, ATK%]
            substats_required_min: 3
          circlet:
            main_allowed: [CR, CD]
            substats_required_any_of: [CR, CD, EM, ATK%]
            substats_required_min: 3
